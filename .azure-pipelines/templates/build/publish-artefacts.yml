steps:
- task: CopyFiles@2
  condition: ne(variables['Build.Reason'], 'PullRequest')
  inputs:
    SourceFolder: '$(System.DefaultWorkingDirectory)'
    Contents: |
      **/libs/*
      build/generated-pom.xml
      build/generated-pom.xml.asc
      build.gradle
      gradlew
      gradlew.bat
      settings.gradle
      gradle.properties
      **/gradle/**
      Scripts/**
    TargetFolder: '$(Build.ArtifactStagingDirectory)/'

- publish: $(Build.ArtifactStagingDirectory)
  condition: ne(variables['Build.Reason'], 'PullRequest')
  artifact: Drop
  displayName: Publish Build Artifact  
